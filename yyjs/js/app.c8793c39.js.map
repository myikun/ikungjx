{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?9b05","webpack:///./src/decrypt/util.js","webpack:///./src/App.vue?44c3","webpack:///src/App.vue","webpack:///./src/App.vue?7a5c","webpack:///./src/App.vue","webpack:///./src/registerServiceWorker.js","webpack:///./src/plugins/element.js","webpack:///./src/main.js","webpack:///./src/decrypt/mflac.js","webpack:///./src/decrypt/tm.js","webpack:///./src/decrypt/qmc.js","webpack:///./src/decrypt/common.js","webpack:///./src/decrypt/ncm.js","webpack:///./src/decrypt/raw.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","GetArrayBuffer","blobObject","Promise","resolve","reader","FileReader","onload","e","target","readAsArrayBuffer","AudioMimeType","mp3","flac","m4a","ogg","GetFileInfo","artist","title","filenameNoExt","ext","newArtist","newTitle","filenameArray","split","trim","newFilename","filename","GetCoverURL","metadata","pic_url","undefined","common","picture","pic","Blob","type","format","URL","createObjectURL","_vm","this","_h","$createElement","_c","_self","attrs","handleFile","staticClass","_v","slot","on","handleDownloadAll","handleDeleteAll","playing_auto","playing_url","staticStyle","tableData","scopedSlots","_u","fn","scope","row","_s","album","$event","handlePlay","$index","handleDownload","handleDelete","staticRenderFns","component","register","process","ready","console","log","registered","cached","updatefound","updated","offline","error","Vue","use","Link","Image","Button","Table","TableColumn","Main","Footer","Container","Icon","Row","Col","Upload","$notify","Notification","config","productionTip","render","h","App","$mount","musicMetadata","require","util","Decrypt","file","raw_filename","raw_ext","status","message","fileBuffer","audioData","Uint8Array","audioDataLen","seed","Mask","DetectMask","cur","NextMask","musicData","musicUrl","parseBlob","tag","info","picUrl","mime","index","mask_index","mask","Array","fill","search_len","block_idx","flag","next_mask","idx","test_idx","FLAC_HEADER","rawDecrypt","header","SEED_MAP","OriginalExtMap","new_ext","x","y","dx","ret","NcmDecrypt","QmcDecrypt","RawDecrypt","MFlacDecrypt","TmDecrypt","CommonDecrypt","substring","lastIndexOf","toLowerCase","raw","rt_data","rawExt","rawFilename","CryptoJS","ID3Writer","CORE_KEY","enc","Hex","parse","META_KEY","a","dataView","DataView","getUint32","keyDataObj","getKeyData","keyBox","getKeyBox","musicMetaObj","getMetaData","offset","musicMeta","audioOffset","f","L","C","artists","forEach","arr","writeID3","musicName","albumPic","join","artistList","writer","setFrame","fetch","arrayBuffer","img","description","addTag","keyLen","cipherText","map","uint8","plainText","AES","decrypt","ciphertext","lib","WordArray","ECB","padding","pad","Pkcs7","sigBytes","words","keyData","box","keys","keyDataLen","_","si","sj","metaDataLen","Base64","toString","Utf8","JSON","replace","fileUrl"],"mappings":"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","file":"js/app.c8793c39.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export {GetArrayBuffer, GetFileInfo, GetCoverURL, AudioMimeType}\n\n// Also a new draft API: blob.arrayBuffer()\nasync function GetArrayBuffer(blobObject) {\n    return await new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onload = (e) => {\n            resolve(e.target.result);\n        };\n        reader.readAsArrayBuffer(blobObject);\n    });\n}\n\nconst AudioMimeType = {\n    mp3: \"audio/mpeg\",\n    flac: \"audio/flac\",\n    m4a: \"audio/mp4\",\n    ogg: \"audio/ogg\"\n};\n\nfunction GetFileInfo(artist, title, filenameNoExt, ext) {\n    let newArtist = \"\", newTitle = \"\";\n    let filenameArray = filenameNoExt.split(\"-\");\n    if (filenameArray.length > 1) {\n        newArtist = filenameArray[0].trim();\n        newTitle = filenameArray[1].trim();\n    } else if (filenameArray.length === 1) {\n        newTitle = filenameArray[0].trim();\n    }\n\n    if (typeof artist == \"string\" && artist !== \"\") {\n        newArtist = artist;\n    }\n    if (typeof title == \"string\" && title !== \"\") {\n        newTitle = title;\n    }\n    let newFilename = newArtist + \" - \" + newTitle + \".\" + ext;\n    return {artist: newArtist, title: newTitle, filename: newFilename};\n}\n\n/**\n * @return {string}\n */\nfunction GetCoverURL(metadata) {\n    let pic_url = \"\";\n    if (metadata.common.picture !== undefined && metadata.common.picture.length > 0) {\n        let pic = new Blob([metadata.common.picture[0].data], {type: metadata.common.picture[0].format});\n        pic_url = URL.createObjectURL(pic);\n    }\n    return pic_url;\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('el-container',[_c('el-main',[_c('el-upload',{attrs:{\"auto-upload\":false,\"on-change\":_vm.handleFile,\"show-file-list\":false,\"action\":\"\",\"drag\":\"\",\"multiple\":\"\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"将文件拖到此处，或\"),_c('em',[_vm._v(\"点击选择\")])]),_c('div',{staticClass:\"el-upload__tip\",attrs:{\"slot\":\"tip\"},slot:\"tip\"},[_vm._v(\"本工具仅在浏览器内对文件进行解锁，无需消耗流量\")])]),_c('el-row',{attrs:{\"id\":\"app-control\"}},[_c('el-button',{attrs:{\"icon\":\"el-icon-download\",\"plain\":\"\"},on:{\"click\":_vm.handleDownloadAll}},[_vm._v(\"下载全部\")]),_c('el-button',{attrs:{\"icon\":\"el-icon-delete\",\"plain\":\"\",\"type\":\"danger\"},on:{\"click\":_vm.handleDeleteAll}},[_vm._v(\"删除全部\")])],1),_c('audio',{attrs:{\"autoplay\":_vm.playing_auto,\"src\":_vm.playing_url,\"controls\":\"\"}}),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"label\":\"封面\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-image',{staticStyle:{\"width\":\"100px\",\"height\":\"100px\"},attrs:{\"src\":scope.row.picture}},[_c('div',{staticClass:\"image-slot el-image__error\",attrs:{\"slot\":\"error\"},slot:\"error\"},[_vm._v(\" 暂无封面 \")])])]}}])}),_c('el-table-column',{attrs:{\"label\":\"歌曲\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',{staticStyle:{\"margin-left\":\"10px\"}},[_vm._v(_vm._s(scope.row.title))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"歌手\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',[_vm._v(_vm._s(scope.row.artist))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"专辑\",\"sortable\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',[_vm._v(_vm._s(scope.row.album))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"circle\":\"\",\"icon\":\"el-icon-video-play\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.handlePlay(scope.$index, scope.row)}}}),_c('el-button',{attrs:{\"circle\":\"\",\"icon\":\"el-icon-download\"},on:{\"click\":function($event){return _vm.handleDownload(scope.row)}}}),_c('el-button',{attrs:{\"circle\":\"\",\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}})]}}])})],1)],1),_c('el-footer',{attrs:{\"id\":\"app-footer\"}},[_c('el-row',[_vm._v(\" 音乐解锁：移除已购音乐的加密保护。 目前支持网易云音乐(ncm)、QQ音乐(qmc, mflac, tkm)以及 \"),_c('a',{attrs:{\"href\":\"https://github.com/ix64/unlock-music/blob/master/README.md\",\"target\":\"_blank\"}},[_vm._v(\"其他格式\")]),_vm._v(\"。 \"),_c('a',{attrs:{\"href\":\"https://github.com/ix64/unlock-music/wiki/使用提示\",\"target\":\"_blank\"}},[_vm._v(\"使用提示\")])]),_c('el-row',[_c('span',[_vm._v(\"Copyright © 2019\")]),_c('a',{attrs:{\"href\":\"https://github.com/ix64\",\"target\":\"_blank\"}},[_vm._v(\"MengYX\")]),_vm._v(\" 音乐解锁使用 \"),_c('a',{attrs:{\"href\":\"https://github.com/ix64/unlock-music/blob/master/LICENSE\",\"target\":\"_blank\"}},[_vm._v(\"MIT许可协议\")]),_vm._v(\" 开放 \"),_c('a',{attrs:{\"href\":\"https://github.com/ix64/unlock-music\",\"target\":\"_blank\"}},[_vm._v(\"源代码\")])])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div id=\"app\">\n        <el-container>\n            <el-main>\n                <el-upload\n                        :auto-upload=\"false\"\n                        :on-change=\"handleFile\"\n                        :show-file-list=\"false\"\n                        action=\"\"\n                        drag\n                        multiple>\n                    <i class=\"el-icon-upload\"></i>\n                    <div class=\"el-upload__text\">将文件拖到此处，或<em>点击选择</em></div>\n                    <div class=\"el-upload__tip\" slot=\"tip\">本工具仅在浏览器内对文件进行解锁，无需消耗流量</div>\n                </el-upload>\n\n                <el-row id=\"app-control\">\n\n                    <el-button @click=\"handleDownloadAll\" icon=\"el-icon-download\" plain>下载全部</el-button>\n                    <el-button @click=\"handleDeleteAll\" icon=\"el-icon-delete\" plain type=\"danger\">删除全部</el-button>\n\n                </el-row>\n                <audio :autoplay=\"playing_auto\" :src=\"playing_url\" controls></audio>\n\n\n                <el-table :data=\"tableData\" style=\"width: 100%\">\n\n                    <el-table-column label=\"封面\">\n                        <template slot-scope=\"scope\">\n                            <el-image :src=\"scope.row.picture\" style=\"width: 100px; height: 100px\">\n                                <div class=\"image-slot el-image__error\" slot=\"error\">\n                                    暂无封面\n                                </div>\n                            </el-image>\n                        </template>\n                    </el-table-column>\n                    <el-table-column label=\"歌曲\" sortable>\n                        <template slot-scope=\"scope\">\n                            <span style=\"margin-left: 10px\">{{ scope.row.title }}</span>\n                        </template>\n                    </el-table-column>\n                    <el-table-column label=\"歌手\" sortable>\n                        <template slot-scope=\"scope\">\n                            <p>{{ scope.row.artist }}</p>\n                        </template>\n                    </el-table-column>\n                    <el-table-column label=\"专辑\" sortable>\n                        <template slot-scope=\"scope\">\n                            <p>{{ scope.row.album }}</p>\n                        </template>\n                    </el-table-column>\n                    <el-table-column label=\"操作\">\n                        <template slot-scope=\"scope\">\n                            <el-button @click=\"handlePlay(scope.$index, scope.row)\"\n                                       circle icon=\"el-icon-video-play\" type=\"success\">\n                            </el-button>\n                            <el-button @click=\"handleDownload(scope.row)\"\n                                       circle icon=\"el-icon-download\">\n                            </el-button>\n                            <el-button @click=\"handleDelete(scope.$index, scope.row)\"\n                                       circle icon=\"el-icon-delete\" type=\"danger\">\n                            </el-button>\n                        </template>\n                    </el-table-column>\n                </el-table>\n            </el-main>\n            <el-footer id=\"app-footer\">\n                <el-row>\n                    音乐解锁：移除已购音乐的加密保护。\n                    目前支持网易云音乐(ncm)、QQ音乐(qmc, mflac, tkm)以及\n                    <a href=\"https://github.com/ix64/unlock-music/blob/master/README.md\" target=\"_blank\">其他格式</a>。\n                    <a href=\"https://github.com/ix64/unlock-music/wiki/使用提示\" target=\"_blank\">使用提示</a>\n                </el-row>\n                <el-row>\n                    <span>Copyright &copy; 2019</span>\n                    <a href=\"https://github.com/ix64\" target=\"_blank\">MengYX</a>\n                    音乐解锁使用\n                    <a href=\"https://github.com/ix64/unlock-music/blob/master/LICENSE\" target=\"_blank\">MIT许可协议</a>\n                    开放\n                    <a href=\"https://github.com/ix64/unlock-music\" target=\"_blank\">源代码</a>\n                </el-row>\n            </el-footer>\n        </el-container>\n    </div>\n</template>\n\n<script>\n\n    const dec = require(\"./decrypt/common\");\n    export default {\n        name: 'app',\n        components: {},\n        data() {\n            return {\n                activeIndex: '1',\n                tableData: [],\n                playing_url: \"\",\n                playing_auto: false,\n            }\n        },\n        mounted() {\n            this.$nextTick(function () {\n                this.finishLoad();\n            });\n        },\n        methods: {\n            finishLoad() {\n                document.getElementById(\"loader-mask\").remove();\n                this.$notify.info({\n                    title: '离线使用',\n                    message: '我们使用PWA技术，无网络也能使用<br/>' +\n                        '最近更新：支持bkcmp3/bkcflac/tkm<br/>' +\n                        '点击查看 <a target=\"_blank\" href=\"https://github.com/ix64/unlock-music/wiki/使用提示\">使用提示</a>',\n                    dangerouslyUseHTMLString: true,\n                    duration: 10000,\n                    position: 'top-left'\n                });\n            },\n            handleFile(file) {\n\n                (async () => {\n                    let data = await dec.CommonDecrypt(file);\n                    if (data.status) {\n                        this.tableData.push(data);\n                        this.$notify.success({\n                            title: '解锁成功',\n                            message: '成功解锁 ' + data.title,\n                            duration: 3000\n                        });\n                        let _rp_data = [data.title, data.artist, data.album];\n                        window._paq.push([\"trackEvent\", \"Unlock\", data.rawExt + \",\" + data.mime, JSON.stringify(_rp_data)]);\n                    } else {\n                        this.$notify.error({\n                            title: '出现问题',\n                            message: data.message + \"，\" + file.name +\n                                '，参考<a target=\"_blank\" href=\"https://github.com/ix64/unlock-music/wiki/使用提示\">使用提示</a>',\n                            dangerouslyUseHTMLString: true,\n                            duration: 6000\n                        });\n                        window._paq.push([\"trackEvent\", \"Error\", data.message, file.name]);\n                    }\n                })();\n            },\n            handlePlay(index, row) {\n                this.playing_url = row.file;\n                this.playing_auto = true;\n            },\n            handleDelete(index, row) {\n                URL.revokeObjectURL(row.file);\n                URL.revokeObjectURL(row.picture);\n                this.tableData.splice(index, 1);\n            },\n            handleDownload(row) {\n                let a = document.createElement('a');\n                a.href = row.file;\n                a.download = row.filename;\n                document.body.append(a);\n                a.click();\n                a.remove();\n            },\n            handleDeleteAll() {\n                this.tableData.forEach(value => {\n                    URL.revokeObjectURL(value.file);\n                    URL.revokeObjectURL(value.picture);\n                });\n                this.tableData = [];\n            },\n            handleDownloadAll() {\n                let index = 0;\n                let c = setInterval(() => {\n                    if (index < this.tableData.length) {\n                        this.handleDownload(this.tableData[index]);\n                        index++;\n                    } else {\n                        clearInterval(c);\n                    }\n                }, 1000);\n\n            }\n        }\n    }\n\n</script>\n\n<style>\n    #app {\n        font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\",\n        \"Hiragino Sans GB\", \"Microsoft YaHei\", \"微软雅黑\", Arial, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n        text-align: center;\n        color: #2c3e50;\n        padding-top: 30px;\n    }\n\n    #app-footer a {\n        padding-left: 0.2em;\n        padding-right: 0.2em;\n    }\n\n    #app-footer {\n        text-align: center;\n        font-size: small;\n    }\n\n    .el-upload-dragger {\n        width: 80vw !important;\n    }\n\n    #app-control {\n        padding-top: 1em;\n        padding-bottom: 1em;\n    }\n\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=143c8f64&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-console */\n\nimport {register} from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n    register(`${process.env.BASE_URL}service-worker.js`, {\n        ready() {\n            console.log(\n                'App is being served from cache by a service worker.\\n' +\n                'For more details, visit https://goo.gl/AFskqB'\n            )\n        },\n        registered() {\n            console.log('Service worker has been registered.')\n        },\n        cached() {\n            console.log('Content has been cached for offline use.')\n        },\n        updatefound() {\n            console.log('New content is downloading.')\n        },\n        updated() {\n            console.log('New content is available; please refresh.')\n        },\n        offline() {\n            console.log('No internet connection found. App is running in offline mode.')\n        },\n        error(error) {\n            console.error('Error during service worker registration:', error)\n        }\n    })\n}\n","import Vue from 'vue'\nimport {\n    Button,\n    Col,\n    Container,\n    Footer,\n    Icon,\n    Image,\n    Link,\n    Main,\n    Notification,\n    Row,\n    Table,\n    TableColumn,\n    Upload\n} from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css'\n\nVue.use(Link);\nVue.use(Image);\nVue.use(Button);\nVue.use(Table);\nVue.use(TableColumn);\nVue.use(Main);\nVue.use(Footer);\nVue.use(Container);\nVue.use(Icon);\nVue.use(Row);\nVue.use(Col);\nVue.use(Upload);\nVue.prototype.$notify = Notification;\n","import Vue from 'vue'\nimport App from './App.vue'\nimport './registerServiceWorker'\nimport './plugins/element.js'\n\n// only if your build system can import css, otherwise import it wherever you would import your css.\nVue.config.productionTip = false;\n\nnew Vue({\n    render: h => h(App),\n}).$mount('#app');\n","const musicMetadata = require(\"music-metadata-browser\");\nconst util = require(\"./util\");\nexport {Decrypt}\n\nasync function Decrypt(file, raw_filename, raw_ext) {\n    // 获取扩展名\n    if (raw_ext !== \"mflac\") return {\n        status: false,\n        message: \"File type is incorrect!\",\n    };\n    // 读取文件\n    const fileBuffer = await util.GetArrayBuffer(file);\n    const audioData = new Uint8Array(fileBuffer.slice(0, -0x170));\n    const audioDataLen = audioData.length;\n\n    // 转换数据\n    const seed = new Mask();\n    if (!seed.DetectMask(audioData)) return {\n        status: false,\n        message: \"此音乐无法解锁，目前mflac格式不提供完整支持\",\n    };\n    for (let cur = 0; cur < audioDataLen; ++cur) {\n        audioData[cur] ^= seed.NextMask();\n    }\n    // 导出\n    const musicData = new Blob([audioData], {type: \"audio/flac\"});\n    const musicUrl = URL.createObjectURL(musicData);\n\n    // 读取Meta\n    let tag = await musicMetadata.parseBlob(musicData);\n    const info = util.GetFileInfo(tag.common.artist, tag.common.title, raw_filename, \"flac\");\n    let picUrl = util.GetCoverURL(tag);\n    // 返回\n    return {\n        status: true,\n        filename: info.filename,\n        title: info.title,\n        artist: info.artist,\n        album: tag.common.album,\n        picture: picUrl,\n        file: musicUrl,\n        mime: \"audio/flac\"\n    }\n}\n\nclass Mask {\n    FLAC_HEADER = [0x66, 0x4C, 0x61, 0x43, 0x00];\n\n    constructor() {\n        this.index = -1;\n        this.mask_index = -1;\n        this.mask = Array(128).fill(0x00);\n    }\n\n    DetectMask(data) {\n\n        let search_len = data.length - 256, mask;\n        for (let block_idx = 0; block_idx < search_len; block_idx += 128) {\n            let flag = true;\n            mask = data.slice(block_idx, block_idx + 128);\n            let next_mask = data.slice(block_idx + 128, block_idx + 256);\n            for (let idx = 0; idx < 128; idx++) {\n                if (mask[idx] !== next_mask[idx]) {\n                    flag = false;\n                    break;\n                }\n            }\n            if (!flag) continue;\n\n\n            for (let test_idx = 0; test_idx < this.FLAC_HEADER.length; test_idx++) {\n                let p = data[test_idx] ^ mask[test_idx];\n                if (p !== this.FLAC_HEADER[test_idx]) {\n                    flag = false;\n                    debugger;\n                    break;\n                }\n            }\n            if (!flag) continue;\n            this.mask = mask;\n            return true;\n        }\n        return false;\n    }\n\n    NextMask() {\n        this.index++;\n        this.mask_index++;\n        if (this.index === 0x8000 || (this.index > 0x8000 && (this.index + 1) % 0x8000 === 0)) {\n            this.index++;\n            this.mask_index++;\n        }\n        if (this.mask_index >= 128) {\n            this.mask_index -= 128;\n        }\n        return this.mask[this.mask_index]\n    }\n\n}\n","const rawDecrypt = require(\"./raw\");\nconst util = require(\"./util\");\nexport {Decrypt}\nconst header = [0x00, 0x00, 0x00, 0x20, 0x66, 0x74, 0x79, 0x70];\n\nasync function Decrypt(file, raw_filename) {\n    const fileBuffer = await util.GetArrayBuffer(file);\n    const audioData = new Uint8Array(fileBuffer);\n    for (let cur = 0; cur < 8; ++cur) {\n        audioData[cur] = header[cur];\n    }\n    const musicData = new Blob([audioData], {type: \"audio/mp4\"});\n    return await rawDecrypt.Decrypt(musicData, raw_filename, \"m4a\")\n}\n","const musicMetadata = require(\"music-metadata-browser\");\nconst util = require(\"./util\");\nexport {Decrypt}\nconst SEED_MAP = [\n    [0x4a, 0xd6, 0xca, 0x90, 0x67, 0xf7, 0x52],\n    [0x5e, 0x95, 0x23, 0x9f, 0x13, 0x11, 0x7e],\n    [0x47, 0x74, 0x3d, 0x90, 0xaa, 0x3f, 0x51],\n    [0xc6, 0x09, 0xd5, 0x9f, 0xfa, 0x66, 0xf9],\n    [0xf3, 0xd6, 0xa1, 0x90, 0xa0, 0xf7, 0xf0],\n    [0x1d, 0x95, 0xde, 0x9f, 0x84, 0x11, 0xf4],\n    [0x0e, 0x74, 0xbb, 0x90, 0xbc, 0x3f, 0x92],\n    [0x00, 0x09, 0x5b, 0x9f, 0x62, 0x66, 0xa1]];\n\nconst OriginalExtMap = {\n    \"qmc0\": \"mp3\",\n    \"qmc3\": \"mp3\",\n    \"qmcogg\": \"ogg\",\n    \"qmcflac\": \"flac\",\n    \"bkcmp3\": \"mp3\",\n    \"bkcflac\": \"flac\",\n    \"tkm\": \"m4a\"\n};\n\nasync function Decrypt(file, raw_filename, raw_ext) {\n    // 获取扩展名\n    if (!(raw_ext in OriginalExtMap)) {\n        return {status: false, message: \"File type is incorrect!\"}\n    }\n    let new_ext = OriginalExtMap[raw_ext]\n    const mime = util.AudioMimeType[new_ext];\n    // 读取文件\n    const fileBuffer = await util.GetArrayBuffer(file);\n    const audioData = new Uint8Array(fileBuffer);\n    // 转换数据\n    const seed = new Mask();\n    for (let cur = 0; cur < audioData.length; ++cur) {\n        audioData[cur] ^= seed.NextMask();\n    }\n    // 导出\n    const musicData = new Blob([audioData], {type: mime});\n    const musicUrl = URL.createObjectURL(musicData);\n    // 读取Meta\n    let tag = await musicMetadata.parseBlob(musicData);\n    const info = util.GetFileInfo(tag.common.artist, tag.common.title, raw_filename, new_ext);\n    let picUrl = util.GetCoverURL(tag);\n\n    // 返回\n    return {\n        status: true,\n        filename: info.filename,\n        title: info.title,\n        artist: info.artist,\n        album: tag.common.album,\n        picture: picUrl,\n        file: musicUrl,\n        mime: mime\n    }\n}\n\nclass Mask {\n    constructor() {\n        this.x = -1;\n        this.y = 8;\n        this.dx = 1;\n        this.index = -1;\n    }\n\n    NextMask() {\n        let ret;\n        this.index++;\n        if (this.x < 0) {\n            this.dx = 1;\n            this.y = (8 - this.y) % 8;\n            ret = 0xc3\n        } else if (this.x > 6) {\n            this.dx = -1;\n            this.y = 7 - this.y;\n            ret = 0xd8\n        } else {\n            ret = SEED_MAP[this.y][this.x]\n        }\n        this.x += this.dx;\n        if (this.index === 0x8000 || (this.index > 0x8000 && (this.index + 1) % 0x8000 === 0)) {\n            return this.NextMask()\n        }\n        return ret\n    }\n\n}\n","const NcmDecrypt = require(\"./ncm\");\nconst QmcDecrypt = require(\"./qmc\");\nconst RawDecrypt = require(\"./raw\");\nconst MFlacDecrypt = require(\"./mflac\");\nconst TmDecrypt = require(\"./tm\");\n\nexport {CommonDecrypt}\n\nasync function CommonDecrypt(file) {\n    let raw_ext = file.name.substring(file.name.lastIndexOf(\".\") + 1, file.name.length).toLowerCase();\n    let raw_filename = file.name.substring(0, file.name.lastIndexOf(\".\"));\n    let rt_data;\n    switch (raw_ext) {\n        case \"ncm\":// Netease Mp3/Flac\n            rt_data = await NcmDecrypt.Decrypt(file.raw);\n            break;\n        case \"mp3\":// Raw Mp3\n        case \"flac\"://Raw Flac\n        case \"m4a\":// Raw M4a\n        case \"ogg\":// Raw Ogg\n            rt_data = await RawDecrypt.Decrypt(file.raw, raw_filename, raw_ext);\n            break;\n        case \"tm0\":// QQ Music IOS Mp3\n        case \"tm3\":// QQ Music IOS Mp3\n            rt_data = await RawDecrypt.Decrypt(file.raw, raw_filename, \"mp3\");\n            break;\n        case \"qmc3\"://QQ Music Android Mp3\n        case \"qmc0\"://QQ Music Android Mp3\n        case \"qmcflac\"://QQ Music Android Flac\n        case \"qmcogg\"://QQ Music Android Ogg\n        case \"tkm\"://QQ Music Accompaniment M4a\n        case \"bkcmp3\"://Moo Music Mp3\n        case \"bkcflac\"://Moo Music Flac\n            rt_data = await QmcDecrypt.Decrypt(file.raw, raw_filename, raw_ext);\n            break;\n        case \"mflac\"://QQ Music Desktop Flac\n            rt_data = await MFlacDecrypt.Decrypt(file.raw, raw_filename, raw_ext);\n            break;\n        case \"tm2\":// QQ Music IOS M4a\n        case \"tm6\":// QQ Music IOS M4a\n            rt_data = await TmDecrypt.Decrypt(file.raw, raw_filename);\n            break;\n        default:\n            rt_data = {status: false, message: \"不支持此文件格式\",}\n    }\n    if (rt_data.status) {\n        rt_data.rawExt = raw_ext;\n        rt_data.rawFilename = raw_filename;\n    }\n    return rt_data;\n}\n","const CryptoJS = require(\"crypto-js\");\nconst ID3Writer = require(\"browser-id3-writer\");\nconst util = require(\"./util\");\nconst CORE_KEY = CryptoJS.enc.Hex.parse(\"687a4852416d736f356b496e62617857\");\nconst META_KEY = CryptoJS.enc.Hex.parse(\"2331346C6A6B5F215C5D2630553C2728\");\n\n\nexport {Decrypt};\n\nasync function Decrypt(file) {\n\n    const fileBuffer = await util.GetArrayBuffer(file);\n    const dataView = new DataView(fileBuffer);\n\n    if (dataView.getUint32(0, true) !== 0x4e455443 ||\n        dataView.getUint32(4, true) !== 0x4d414446)\n        return {status: false, message: \"此ncm文件已损坏\"};\n\n\n    const keyDataObj = getKeyData(dataView, fileBuffer, 10);\n    const keyBox = getKeyBox(keyDataObj.data);\n\n    const musicMetaObj = getMetaData(dataView, fileBuffer, keyDataObj.offset);\n    const musicMeta = musicMetaObj.data;\n\n    let audioOffset = musicMetaObj.offset + dataView.getUint32(musicMetaObj.offset + 5, true) + 13;\n    let audioData = new Uint8Array(fileBuffer, audioOffset);\n\n    for (let cur = 0; cur < audioData.length; ++cur) {\n        audioData[cur] ^= keyBox[cur & 0xff];\n    }\n\n    if (musicMeta.format === undefined) {\n        const [f, L, a, C] = audioData;\n        if (f === 0x66 && L === 0x4c && a === 0x61 && C === 0x43) {\n            musicMeta.format = \"flac\";\n        } else {\n            musicMeta.format = \"mp3\";\n        }\n    }\n    const mime = util.AudioMimeType[musicMeta.format];\n\n    const artists = [];\n    musicMeta.artist.forEach(arr => {\n        artists.push(arr[0]);\n    });\n    if (musicMeta.format === \"mp3\") {\n        audioData = await writeID3(audioData, artists, musicMeta.musicName, musicMeta.album, musicMeta.albumPic)\n    }\n\n    const musicData = new Blob([audioData], {type: mime});\n    const musicUrl = URL.createObjectURL(musicData);\n    const filename = artists.join(\" & \") + \" - \" + musicMeta.musicName + \".\" + musicMeta.format;\n    return {\n        status: true,\n        filename: filename,\n        title: musicMeta.musicName,\n        artist: artists.join(\" & \"),\n        album: musicMeta.album,\n        picture: musicMeta.albumPic,\n        file: musicUrl,\n        mime: mime\n    };\n}\n\nasync function writeID3(audioData, artistList, title, album, picture) {\n    const writer = new ID3Writer(audioData);\n    writer.setFrame(\"TPE1\", artistList)\n        .setFrame(\"TIT2\", title)\n        .setFrame(\"TALB\", album);\n    if (picture !== \"\") {\n        try {\n            const img = await (await fetch(picture)).arrayBuffer();\n            writer.setFrame('APIC', {\n                type: 3,\n                data: img,\n                description: 'Cover'\n            })\n        } catch (e) {\n            console.log(\"Fail to write cover image!\");\n        }\n    }\n    writer.addTag();\n    return writer.arrayBuffer;\n}\n\nfunction getKeyData(dataView, fileBuffer, offset) {\n    const keyLen = dataView.getUint32(offset, true);\n    offset += 4;\n    const cipherText = new Uint8Array(fileBuffer, offset, keyLen).map(\n        uint8 => uint8 ^ 0x64\n    );\n    offset += keyLen;\n\n    const plainText = CryptoJS.AES.decrypt(\n        {ciphertext: CryptoJS.lib.WordArray.create(cipherText)},\n        CORE_KEY,\n        {\n            mode: CryptoJS.mode.ECB,\n            padding: CryptoJS.pad.Pkcs7\n        }\n    );\n\n    const result = new Uint8Array(plainText.sigBytes);\n\n    const words = plainText.words;\n    const sigBytes = plainText.sigBytes;\n    for (let i = 0; i < sigBytes; i++) {\n        result[i] = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n    }\n\n    return {offset: offset, data: result.slice(17)};\n}\n\nfunction getKeyBox(keyData) {\n    const box = new Uint8Array(Array(256).keys());\n\n    const keyDataLen = keyData.length;\n\n    let j = 0;\n\n    for (let i = 0; i < 256; i++) {\n        j = (box[i] + j + keyData[i % keyDataLen]) & 0xff;\n        [box[i], box[j]] = [box[j], box[i]];\n    }\n\n    return box.map((_, i, arr) => {\n        i = (i + 1) & 0xff;\n        const si = arr[i];\n        const sj = arr[(i + si) & 0xff];\n        return arr[(si + sj) & 0xff];\n    });\n}\n\n/**\n * @typedef {Object} MusicMetaType\n * @property {Number} musicId\n * @property {String} musicName\n * @property {[[String, Number]]} artist\n * @property {String} album\n * @property {\"flac\"|\"mp3\"} format\n * @property {String} albumPic\n */\n\nfunction getMetaData(dataView, fileBuffer, offset) {\n    const metaDataLen = dataView.getUint32(offset, true);\n    offset += 4;\n    if (metaDataLen === 0) {\n        return {};\n    }\n\n    const cipherText = new Uint8Array(fileBuffer, offset, metaDataLen).map(\n        data => data ^ 0x63\n    );\n    offset += metaDataLen;\n\n    const plainText = CryptoJS.AES.decrypt({\n            ciphertext: CryptoJS.enc.Base64.parse(\n                CryptoJS.lib.WordArray.create(cipherText.slice(22)).toString(CryptoJS.enc.Utf8)\n            )\n        },\n        META_KEY,\n        {mode: CryptoJS.mode.ECB, padding: CryptoJS.pad.Pkcs7}\n    );\n\n    const result = JSON.parse(plainText.toString(CryptoJS.enc.Utf8).slice(6));\n    result.albumPic = result.albumPic.replace(\"http:\", \"https:\");\n    return {data: result, offset: offset};\n}\n\n\n","const musicMetadata = require(\"music-metadata-browser\");\nconst util = require(\"./util\");\nexport {Decrypt}\n\n\nasync function Decrypt(file, raw_filename, raw_ext) {\n    let tag = await musicMetadata.parseBlob(file);\n\n    let fileUrl = URL.createObjectURL(file);\n\n    const picUrl = util.GetCoverURL(tag);\n    const mime = util.AudioMimeType[raw_ext];\n    const info = util.GetFileInfo(tag.common.artist, tag.common.title, raw_filename, raw_ext);\n\n    return {\n        status: true,\n        filename: info.filename,\n        title: info.title,\n        artist: info.artist,\n        album: tag.common.album,\n        picture: picUrl,\n        file: fileUrl,\n        mime: mime\n    }\n}\n"],"sourceRoot":""}